{"version":3,"sources":["../../../js/animations/animation.repeat.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAClB,SAAS,CAAC,mBAAmB,EAAE,CAAC,UAAU,EAAE,UAAS,QAAQ,EAAE;;AAE9D,MAAI,KAAK,GAAG,EAAE,KAAK,EAAG,EAAE,EAAE,KAAK,EAAG,EAAE,EAAE,CAAC;AACvC,WAAS,kBAAkB,CAAC,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE;AAC5D,QAAI,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC;AAChC,SAAK,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC;AAChB,aAAO,EAAG,OAAO;AACjB,UAAI,EAAG,IAAI;KACZ,CAAC,CAAC;AACH,SAAK,CAAC,KAAK,CAAC,CAAC,KAAK,IAAI,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC;AAC1D,SAAK,CAAC,KAAK,CAAC,CAAC,KAAK,GAAG,QAAQ,CAAC,YAAW;AACvC,UAAI,IAAI,GAAG,EAAE;UAAE,OAAO,GAAG,EAAE,CAAC;AAC5B,aAAO,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE,UAAS,IAAI,EAAE;AAC3C,YAAI,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;AAChC,eAAO,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;OACzB,CAAC,CAAC;AACH,UAAI,MAAM,GAAG,kBAAW;AACtB,eAAO,CAAC,OAAO,CAAC,OAAO,EAAE,UAAS,EAAE,EAAE;AACpC,YAAE,EAAE,CAAC;SACN,CAAC,CAAC;OACJ,CAAC;AACF,gBAAU,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;AACzB,WAAK,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;KACnB,EAAE,EAAE,EAAE,KAAK,CAAC,CAAC;;AAEd,WAAO,YAAW;AAChB,WAAK,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;KACnB,CAAC;GACH;;AAED,SAAO;AACL,SAAK,EAAG,eAAS,OAAO,EAAE,IAAI,EAAE;AAC9B,aAAO,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;AAC1B,UAAI,MAAM,GAAG,kBAAkB,CAAC,OAAO,EACrC,OAAO,EAAE,IAAI,EAAE,UAAS,QAAQ,EAAE,IAAI,EAAE;;AAExC,gBAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,EAAE,EAAE,OAAO,EAAG,CAAC,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;OACzD,CAAC,CAAC;AACH,aAAO,SAAS,OAAO,CAAC,SAAS,EAAE;AACjC,iBAAS,IAAI,MAAM,EAAE,CAAC;OACvB,CAAC;KACH;AACD,SAAK,EAAG,eAAS,OAAO,EAAE,IAAI,EAAE;AAC9B,UAAI,MAAM,GAAG,kBAAkB,CAAC,OAAO,EACrC,OAAO,EAAE,IAAI,EAAE,UAAS,QAAQ,EAAE,IAAI,EAAE;;AAExC,gBAAQ,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,EAAE,EAAE,OAAO,EAAG,CAAC,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;OACzD,CAAC,CAAC;AACH,aAAO,SAAS,OAAO,CAAC,SAAS,EAAE;AACjC,iBAAS,IAAI,MAAM,EAAE,CAAC;OACvB,CAAC;KACH;GACF,CAAC;CACH,CAAC,CAAC,CAAC","file":"src/js/animations/animation.repeat.js","sourcesContent":["\"use strict\";\n\nangular.module('app')\n  .animation('.repeat-animation', ['$timeout', function($timeout) {\n\n    let queue = { enter : [], leave : [] };\n    function queueAllAnimations(event, element, done, onComplete) {\n      let index = queue[event].length;\n      queue[event].push({\n        element : element,\n        done : done\n      });\n      queue[event].timer && $timeout.cancel(queue[event].timer);\n      queue[event].timer = $timeout(function() {\n        let elms = [], doneFns = [];\n        angular.forEach(queue[event], function(item) {\n          item && elms.push(item.element);\n          doneFns.push(item.done);\n        });\n        let onDone = function() {\n          angular.forEach(doneFns, function(fn) {\n            fn();\n          });\n        };\n        onComplete(elms, onDone);\n        queue[event] = [];\n      }, 10, false);\n\n      return function() {\n        queue[event] = [];\n      };\n    }\n\n    return {\n      enter : function(element, done) {\n        element.css('opacity', 0);\n        let cancel = queueAllAnimations('enter',\n          element, done, function(elements, done) {\n\n          TweenMax.allTo(elements, 1, { opacity : 1 }, 0.2, done);\n        });\n        return function onClose(cancelled) {\n          cancelled && cancel();\n        };\n      },\n      leave : function(element, done) {\n        let cancel = queueAllAnimations('leave',\n          element, done, function(elements, done) {\n\n          TweenMax.allTo(elements, 1, { opacity : 0 }, 0.2, done);\n        });\n        return function onClose(cancelled) {\n          cancelled && cancel();\n        };\n      }\n    };\n  }]);\n"]}