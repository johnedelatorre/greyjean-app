{"version":3,"sources":["../../../js/controllers/signup.js"],"names":[],"mappings":"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","file":"src/js/controllers/signup.js","sourcesContent":["'use strict';\n\n// signup controller\napp.controller('SignupFormController', ['$scope', '$rootScope', 'Auth', '$state',\n  function(                              $scope,   $rootScope,   Auth,   $state) {\n\n    $scope.authError = null;\n    $scope.signup = function() {\n      let merchantInfo = {\n            FirstName : $scope.user.firstName,\n            LastName  : $scope.user.lastName,\n            Email     : $scope.user.email,\n            Password  : $scope.user.password,\n            MobileNo  : $scope.user.mobileNo\n          }\n      Auth.signup(merchantInfo)\n        .then(function(response) {\n          let statusCode = response.FlikResponse.Status.StatusCode;\n          let statusMessage = response.FlikResponse.Status.StatusMessage;\n          console.log('this is the signup response '+JSON.stringify(response, null, 4));\n          if ( statusCode == 0 ) {\n            let merchantToken = response.FlikResponse.Data.MerchantToken.AuthToken;\n            console.info( 'success' + JSON.stringify(response, null, 4));\n            locker.driver('local')\n              .namespace('core')\n              .put('merchantToken', merchantToken);\n            console.info('this is merchantToken ' +merchantToken);\n            // $state.go('core.home');\n            Auth.getMe(merchantToken).then(response => {\n              let me = response.FlikResponse.Data.Merchant.Me;\n              console.info('this is me '+JSON.stringify(me, null, 4));\n              if (statusCode == 0) {\n                let merchantInfo = {\n                      merchantId     : me.merchantId,\n                      loginId        : me.loginId,\n                      email          : me.email,\n                      firstName      : me.firstName,\n                      lastName       : me.lastName,\n                      mobileNo       : me.mobileNo,\n                      applicationKey : me.applicationKey,\n                      developerKey   : me.developerKey\n                    }\n                console.warn('and the status is on get me is '+statusCode);\n                locker.driver('local')\n                  .namespace('core')\n                  .put('me', merchantInfo);\n                $rootScope.merchantMe = merchantInfo;\n                console.log('Success - transaction writing merchant with '+me.email+' completed');\n                $state.go('core.home');\n                console.info( 'merchant name is '+me.firstName+' '+me.lastName+' with email '+me.email);\n              } else if (statusCode == 3) {\n                console.warn('and the status is '+statusCode);\n                console.warn( response+' token not valid - need to login again' );\n                locker.driver('local').namespace('core')\n                  .forget('merchantToken');\n                $state.go('access.signin');\n              }\n            }, error => {\n              console.info( 'cannot validate token -- the error is ' + JSON.stringify(error, null, 4));\n              Raven.captureMessage('API is giving error for getMe this is the error code ' +error.statusCode);\n            });\n          } else if (statusCode == 1) {\n            console.warn( 'no bueno' + JSON.stringify(response, null, 4));\n            $scope.authError = statusMessage;\n          } else {\n            console.warn( 'no bueno' + JSON.stringify(response, null, 4));\n            $scope.authError = statusMessage;\n          }\n        }, error => {\n          console.info('this is the signup error '+error);\n          $scope.authError = 'Server Error';\n        });\n    };\n\n  }])\n ;\n"]}