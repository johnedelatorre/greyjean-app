{"version":3,"sources":["../../../js/controllers/core.campaign.update.js"],"names":[],"mappings":"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","file":"core.campaign.update.js","sourcesContent":["\"use strict\";\n\napp.filter(\"propsFilter\", function() {\n    return function(items, props) {\n        let out = [];\n\n        if (angular.isArray(items)) {\n          items.forEach(function(item) {\n            let itemMatches = false;\n\n            let keys = Object.keys(props);\n            for (let i = 0; i < keys.length; i++) {\n              let prop = keys[i];\n              let text = props[prop].toLowerCase();\n              if (item[prop].toString().toLowerCase().indexOf(text) !== -1) {\n                itemMatches = true;\n                break;\n              }\n            }\n\n            if (itemMatches) {\n              out.push(item);\n            }\n          });\n        } else {\n          // Let the output be the input untouched\n          out = items;\n        }\n\n        return out;\n    };\n})\n\napp.controller(\"CoreCampaignUpdateCtrl\", [\"$scope\", \"$rootScope\", \"locker\",  \"Campaign\",  \"$state\", \"$stateParams\", \"$filter\", \"$mdToast\", \"$mdDialog\", \"$animate\", \"Fingerprint\", \"Offer\", \"Auth\", \"$location\", \"$rootElement\", \"$window\",\n  function(                                $scope,   $rootScope,   locker,    Campaign,    $state,   $stateParams,   $filter,   $mdToast,   $mdDialog,   $animate, Fingerprint, Offer, Auth, $location, $rootElement, $window){\n\n    $scope.allData = $rootScope.allData;\n      $scope.allFingerprints = {};\n      $scope.allOffers = {};\n      var i =1;\n      var paginateOffersVariable = 1;\n      var paginateFingerprintsVariable = 1;\n    /**\n     * get merchantMe and merchantToken from Locker\n     *\n     */\n    let merchantMe = locker.driver(\"local\").namespace(\"core\").get(\"me\");\n    let merchantToken = locker.driver(\"local\").namespace(\"core\").get(\"merchantToken\");\n    $scope.toggleWizardLoader ={};\n\n    /**\n     * datetimepicker for campaign\n     */\n\n    $scope.campaignDates = {\n      startDate: null,\n      endDate: null\n    }\n\n      var start = 0;\n      var limit = 30;\n      var queryString = '';\n      Offer.OfferPaginateAllData(start,limit,merchantToken).then(function() {\n          $scope.allOffers = Offer.getOfferPaginateAllData();\n\n      });\n      Fingerprint.FingerprintPaginateAllData(start,limit,merchantToken).then(function() {\n          $scope.allFingerprints = Fingerprint.getFingerprintPaginateAllData();\n\n      });\n\n\n    //console.log(`this is allData ${JSON.stringify($rootScope.allData, null, 4)}`);\n\n    $scope.dateTimeNow = function() {\n        $scope.campaignDates.startDate = new Date();\n        $scope.campaignDates.endDate = new Date();\n      };\n    $scope.dateTimeNow();\n\n    $scope.toggleMinDate = function() {\n      $scope.minDate = $scope.minDate ? null : new Date();\n    };\n\n    $scope.maxDate = new Date('2014-06-22');\n    $scope.toggleMinDate();\n\n    $scope.dateOptions = {\n      startingDay: 1,\n      showWeeks: false\n    };\n\n    // Disable weekend selection\n    // $scope.disabled = function(calendarDate, mode) {\n    //   return mode === 'day' && ( calendarDate.getDay() === 0 || calendarDate.getDay() === 6 );\n    // };\n\n    $scope.hourStep = 1;\n    $scope.minuteStep = 5;\n\n    $scope.timeOptions = {\n      hourStep: [1, 2, 3],\n      minuteStep: [1, 5, 10, 15, 25, 30]\n    };\n\n    $scope.showMeridian = true;\n    $scope.timeToggleMode = function() {\n      $scope.showMeridian = !$scope.showMeridian;\n    };\n\n    $scope.resetHours = function() {\n      $scope.date.setHours(1);\n    };\n    \n    // setting the campaign URL for smart app banner using angular element and $rootElement service\n    \n    $scope.settingCamapignUrl =() =>{\n      let iTuneUrl = \"https://itunes.apple.com/us/app/genie-app/id965196098?mt=8\";\n      let campaignUrl = $location.absUrl();\n      let contentInfo = \"app-id=965196098, app-argument=\" +campaignUrl;\n      var metaDesc = angular.element($rootElement.find('meta[name=apple-itunes-app]')[0]);\n      metaDesc.attr('content', contentInfo);\n      $window.location.href = iTuneUrl;\n      $location.replace();\n    };\n\n      $scope.addMoreOfferItems = function () {\n\n          var limit = 30;\n          var start = limit*paginateOffersVariable;\n\n          Offer.OfferPaginateAllData(start,limit,merchantToken).then(function() {\n              $scope.allOffers = $scope.allOffers.concat(Offer.getOfferPaginateAllData());\n\n\n          });\n          paginateOffersVariable=paginateOffersVariable+1;\n      };\n\n      $scope.addMoreFingerprintItems = function () {\n\n          var limit = 30;\n          var start = limit*paginateFingerprintsVariable;\n\n          Fingerprint.FingerprintPaginateAllData(start,limit,merchantToken).then(function() {\n              $scope.allFingerprints = $scope.allFingerprints.concat(Fingerprint.getFingerprintPaginateAllData());\n\n\n          });\n          paginateFingerprintsVariable=paginateFingerprintsVariable+1;\n      };\n\n      $scope.refreshList = function() {\n          queryString = query;\n      };\n    /**\n     * update our offer if offer already exists\n     *\n     * @return {object} updated offer\n     */\n    $scope.updateCampaign = activate => {\n      $scope.toggleWizardLoader.showLoader = true;\n      let cName              = $scope.campaignName;\n      let timeNow            = moment().format(\"YYYY-MM-DD hh:mm:ss\");\n      let cStartDate         = moment($scope.campaignStartDate).format(\"YYYY-MM-DD\");\n      let cEndDate           = moment($scope.campaignEndDate).format(\"YYYY-MM-DD\");\n      let activateCampaign   = (activate) ? true : false;\n      let merchantId         = merchantMe.merchantId;\n      let currentCampaignId  = $scope.campaignId;\n      let fID                = $scope.fingerprint.selected.fingerprintId;\n      let oID                = $scope.offer.selected.offerId;\n      /**\n       * this is what we send to the API on update from create screen.\n       *\n       * @campaign  {Object}\n       */\n      let campaign = {\n            CampaignId    : currentCampaignId,\n            CampaignName  : cName,\n            FingerprintId : fID,\n            OfferId       : oID,\n            DateStart     : cStartDate,\n            DateEnd       : cEndDate,\n            MerchantToken : merchantToken,\n            MerchantId    : merchantId\n          };\n      console.info(merchantMe);\n      Campaign.update(campaign).then(response => {\n        let statusCode    = response.FlikResponse.Status.StatusCode;\n        let statusMessage = response.FlikResponse.Status.StatusMessage;\n        if (statusCode == 0) {\n          let timeNow       = moment().format(\"YYYY-MM-DD hh:mm:ss\");\n          let cID           = response.FlikResponse.Data.MerchantCampaignUpdate.MerchantCampaignId;\n          let updateMessage = (activateCampaign) ? \"Updated and Activated\" : \"Updated\";\n          let campaignUpdateData ={\n            campaignId         : currentCampaignId,\n            campaignName       : cName,\n            fingerprintId      : fID,\n            offerId            : oID,\n            dateStart          : cStartDate,\n            dateEnd            : cEndDate,\n            merchantToken      : merchantToken\n          };\n          let allCamapign = $rootScope.allData.campaigns.list;\n          angular.forEach(allCamapign,function(camapign,index){\n\n            if(camapign.campaignId == currentCampaignId){\n              $rootScope.allData.campaigns.list[index]= campaignUpdateData;\n            }\n\n          });\n\n          locker.driver(\"session\")\n            .namespace(\"campaignCreate\")\n            .put(\"activeCampaignId\", cID);\n          $scope.toggleWizardLoader.showLoader = false;\n          $mdToast.show(\n            $mdToast.simple()\n              .content(\"campaign \" + cName + \" \" + updateMessage)\n              .position(\"top right\")\n              .hideDelay(2700)\n          );\n        } else if (statusCode == 1 && statusMessage == \"Campaign name must be unique\") {\n          $scope.toggleWizardLoader.showLoader = false;\n          $mdToast.show(\n            $mdToast.simple()\n              .content(\"Cannot Update Campaign from create screen \"+cName+\" Please try from the view/edit screen\")\n              .position(\"top right\")\n              .hideDelay(2700)\n          );\n        } else if (statusCode == 3) {\n          /**\n           * if we reach here merchantToken is no longer valid\n           * if we reach here merchantToken is no longer valid\n           * we boot user back to signin\n           *\n           * TODO:   =>   add modal to reauth without back to signin page\n           */\n          console.warn(\"and the status is \"+statusCode);\n          console.warn(JSON.stringify(response, null, 4)+\" token not valid - need to login again\");\n          locker.driver(\"local\")\n            .namespace(\"core\")\n            .forget(\"merchantToken\");\n          $state.go(\"access.signin\");\n          console.info(\"bye -- see you soon\");\n        }\n      }, error => {\n        $scope.toggleWizardLoader.showLoader = false;\n        $mdToast.show(\n          $mdToast.simple()\n            .content(\"Error updating \"+fName)\n            .position(\"top right\")\n            .hideDelay(2700)\n        );\n      });\n    }\n\n  }]);\n"]}