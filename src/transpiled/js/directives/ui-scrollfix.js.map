{"version":3,"sources":["../../../js/directives/ui-scrollfix.js"],"names":[],"mappings":"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","file":"src/js/directives/ui-scrollfix.js","sourcesContent":["'use strict';\n\n/**\n * Adds a 'ui-scrollfix' class to the element when the page scrolls past it's position.\n * @param [offset] {int} optional Y-offset to override the detected offset.\n *   Takes 300 (absolute) or -300 or +300 (relative to detected)\n */\nangular.module('ui.scrollfix',[]).directive('uiScrollfix', ['$window', function ($window) {\n  function getWindowScrollTop() {\n    if (angular.isDefined($window.pageYOffset)) {\n      return $window.pageYOffset;\n    } else {\n      var iebody = (document.compatMode && document.compatMode !== 'BackCompat') ? document.documentElement : document.body;\n      return iebody.scrollTop;\n    }\n  }\n  return {\n    require: '^?uiScrollfixTarget',\n    link: function (scope, elm, attrs, uiScrollfixTarget) {\n      var absolute = true,\n          shift = 0,\n          fixLimit,\n          $target = uiScrollfixTarget && uiScrollfixTarget.$element || angular.element($window);\n\n      if (!attrs.uiScrollfix) {\n          absolute = false;\n      } else if (typeof(attrs.uiScrollfix) === 'string') {\n        // charAt is generally faster than indexOf: http://jsperf.com/indexof-vs-charat\n        if (attrs.uiScrollfix.charAt(0) === '-') {\n          absolute = false;\n          shift = - parseFloat(attrs.uiScrollfix.substr(1));\n        } else if (attrs.uiScrollfix.charAt(0) === '+') {\n          absolute = false;\n          shift = parseFloat(attrs.uiScrollfix.substr(1));\n        }\n      }\n\n      fixLimit = absolute ? attrs.uiScrollfix : elm[0].offsetTop + shift;\n\n      function onScroll() {\n\n        var limit = absolute ? attrs.uiScrollfix : elm[0].offsetTop + shift;\n\n        // if pageYOffset is defined use it, otherwise use other crap for IE\n        var offset = uiScrollfixTarget ? $target[0].scrollTop : getWindowScrollTop();\n        if (!elm.hasClass('ui-scrollfix') && offset > limit) {\n          elm.addClass('ui-scrollfix');\n          fixLimit = limit;\n        } else if (elm.hasClass('ui-scrollfix') && offset < fixLimit) {\n          elm.removeClass('ui-scrollfix');\n        }\n      }\n\n      $target.on('scroll', onScroll);\n\n      // Unbind scroll event handler when directive is removed\n      scope.$on('$destroy', function() {\n        $target.off('scroll', onScroll);\n      });\n    }\n  };\n}]).directive('uiScrollfixTarget', [function () {\n  return {\n    controller: ['$element', function($element) {\n      this.$element = $element;\n    }]\n  };\n}]);\n"]}