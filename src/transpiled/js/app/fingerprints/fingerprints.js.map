{"version":3,"sources":["../../../../js/app/fingerprints/fingerprints.js"],"names":[],"mappings":"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","file":"fingerprints.js","sourcesContent":["app.controller(\"FingerprintsCtrl\", [\"$scope\", \"$rootScope\", \"$http\", \"$mdToast\", \"Fingerprint\", \"$filter\",\n  function(                          $scope,   $rootScope,   $http,   $mdToast,   Fingerprint,   $filter) {\n\n    /**\n     * get Dexie dbCore\n     *\n     */\n    let dbCore = $rootScope.dbCore;\n    /**\n     * get merchantMe and merchantToken from Locker\n     *\n     */\n\n    $scope.toggleWizardLoader = {\n        showLoader: false\n    }\n\n    let merchantMe    = locker.driver(\"local\").namespace(\"core\").get(\"me\");\n    let merchantToken = locker.driver(\"local\").namespace(\"core\").get(\"merchantToken\");\n    let productId = locker.driver(\"session\").namespace(\"fingerprintCreate\").get(\"activeFingerprintSocialTransactionId\");\n    let merchantFingerprints = $rootScope.allData.fingerprints;\n      $scope.allFingerprints = {};\n      //$scope.allFingerprints.list = {};\n      //$scope.allFingerprints.count = 0;\n      $scope.toggleWizardLoader.showLoader = true;\n      Fingerprint.FingerprintAllData(merchantToken).then(function(resp) {\n          //console.log($scope.allFingerprints.list.length);\n          $scope.allFingerprints = resp.MerchantFingerprintAll;\n          //$scope.allFingerprints.list = $scope.allFingerprints;\n          $scope.toggleWizardLoader.showLoader = false;\n      });\n\n    $scope.trashFingerprint = (index, fId) => {\n      let fingerprintId = {\n        FingerprintId: fId,\n        MerchantToken: merchantToken\n      }\n\n      let fingerprintInfo ={\n          MerchantToken                 : merchantToken,\n          MerchantFingerprintId         : fId\n      }\n\n\n      Fingerprint.trash(fingerprintId).then(response => {\n\n        let statusCode    = response.FlikResponse.Status.StatusCode;\n        let statusMessage = response.FlikResponse.Status.StatusMessage;\n\n        if (statusCode == 0) {\n            $scope.allFingerprints.splice(index, 1);\n          //merchantFingerprints.list.splice(index, 1);\n          //merchantFingerprints.count = merchantFingerprints.list.length;\n\n          $mdToast.show(\n            $mdToast.simple()\n              .content(\"fingerprint deleted successfully\")\n              .position(\"top right\")\n              .hideDelay(2700)\n          );\n\n        } else if (statusCode == 1 && statusMessage == \"No record found\" ||\n\n          statusCode == 1 && statusMessage ==  \"Data in the request is either empty or of invalid format\") {\n          $mdToast.show(\n            $mdToast.simple()\n              .content(statusMessage)\n              .position(\"top right\")\n              .hideDelay(2700)\n          );\n\n        } else if (statusCode == 3) {\n\n          /**\n           * if we reach here merchantToken is no longer valid\n           * we boot user back to signin\n           *\n           * TODO: add modal to reauth without back to signin page\n           */\n          locker.driver(\"local\")\n            .namespace(\"core\")\n            .forget(\"merchantToken\");\n          $state.go(\"access.signin\");\n          console.group(\"and the status is \" + statusCode);\n          console.warn(response + \" token not valid - need to login again\");\n          console.info(\"bye -- see you soon\");\n          console.groupEnd();\n\n        } else {\n\n          $mdToast.show(\n            $mdToast.simple()\n              .content(statusMessage)\n              .position(\"top right\")\n              .hideDelay(2700)\n          );\n          console.warn(statusMessage + \" this is the status message\");\n\n        }\n      }, error => {\n\n        $mdToast.show(\n          $mdToast.simple()\n            .content(\"there was an error deleting fingerprint please try again\")\n            .position(\"top right\")\n            .hideDelay(2700)\n        );\n        console.warn(error + \" this is the error from fingerprint delete\");\n\n      });\n\n      Fingerprint.deleteProduct(fingerprintInfo).then(response =>{\n\n          let statusCode = response.FlikResponse.Status.StatusCode;\n          let statusMessage =response.FlikResponse.Status.StatusMessage;\n          if(statusCode == 0){\n\n\n          } else{\n              $mdToast.show(\n                  $mdToast.simple()\n                      .content(statusMessage)\n                      .position(\"top right\")\n                      .hideDelay(2700)\n              );\n          }\n      });\n\n        Fingerprint.deleteCause(fingerprintInfo).then(response =>{\n\n            let statusCode = response.FlikResponse.Status.StatusCode;\n            let statusMessage =response.FlikResponse.Status.StatusMessage;\n            if(statusCode == 0){\n\n\n            } else{\n                $mdToast.show(\n                    $mdToast.simple()\n                        .content(statusMessage)\n                        .position(\"top right\")\n                        .hideDelay(2700)\n                );\n            }\n        });\n    }\n\n}]);\n"]}